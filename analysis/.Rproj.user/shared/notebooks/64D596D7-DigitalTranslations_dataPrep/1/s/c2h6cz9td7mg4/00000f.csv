"0","library(Rtsne)"
"0","library(dimRed)"
"0",""
"0","set.seed(1234)"
"0","embeds2.tsne <- embeds.scaled %>% "
"0","  ungroup() %>%"
"0","  dplyr::select(use_0:use_511) %>%"
"0","  # scale() %>%"
"0","  Rtsne(dims=2, pca=FALSE, perplexity=30, theta=0.5, check_duplicates = F)"
"0",""
"0","# Reformat the t-SNE results as a data frame:"
"0","embeds2.tsne_df <- embeds2.tsne$Y %>%"
"0","  as.data.frame() %>%"
"0","  rename(tSNE1 = ""V1"","
"0","         tSNE2 = ""V2"") %>%"
"0","  mutate(ID2 = row_number())"
"0",""
"0","# Rejoin with initial data: "
"0","embeds3 <- embeds.scaled %>% "
"0","  ungroup() %>% "
"0","  mutate(ID2 = row_number()) %>%"
"0","  left_join(embeds2.tsne_df) %>% "
"0","  dplyr::select(-ID2) %>% "
"0","  mutate(story = all.clean.split$story, "
"0","         lang = all.clean.split$lang, "
"0","         sentences = all.clean.split$sentences, "
"0","         sent_num = all.clean.split$sent_num) %>% "
"0","  group_by(story) %>% "
"0","  mutate(sent_num_within_story = 1:n(),"
"0","         sent_num_within_story_n = sent_num_within_story/n()) %>%"
"0","  dplyr::select(story, lang, sentences, "
"0","                sent_num, sent_num_within_story, sent_num_within_story_n, "
"0","                tSNE1, tSNE2, everything())"
"0",""
